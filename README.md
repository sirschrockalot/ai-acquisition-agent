# ğŸ  AI Acquisition Agent

> **Professional-grade AI-powered property analysis and acquisition platform for real estate professionals**

[![Node.js](https://img.shields.io/badge/Node.js-18+-green.svg)](https://nodejs.org/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.9+-blue.svg)](https://www.typescriptlang.org/)
[![License](https://img.shields.io/badge/License-ISC-blue.svg)](LICENSE)
[![Database](https://img.shields.io/badge/Database-MongoDB-green.svg)](https://www.mongodb.com/)
[![AI](https://img.shields.io/badge/AI-GPT--4-purple.svg)](https://openai.com/)
[![Slack](https://img.shields.io/badge/Slack-Bot-orange.svg)](https://slack.com/)

## ğŸ“‹ Table of Contents

- [Overview](#overview)
- [ğŸš€ Key Features](#-key-features)
- [ğŸ’¬ How to Interact](#-how-to-interact)
- [ğŸ“¸ Photo Analysis](#-photo-analysis)
- [ğŸ—ï¸ Advanced Analysis](#ï¸-advanced-analysis)
- [ğŸ“Š Comping System](#-comping-system)
- [ğŸ—ï¸ Architecture](#ï¸-architecture)
- [âš¡ Quick Start](#-quick-start)
- [ğŸ“¦ Installation](#-installation)
- [âš™ï¸ Configuration](#ï¸-configuration)
- [ğŸ”§ Development](#-development)
- [ğŸ“š Documentation](#-documentation)
- [ğŸ¤ Contributing](#-contributing)
- [ğŸ“„ License](#-license)

## ğŸ¯ Overview

The AI Acquisition Agent is a **comprehensive property analysis platform** that transforms how real estate professionals evaluate investment opportunities. It combines advanced AI, computer vision, and professional-grade analysis to provide **defensible, lender-grade assessments** that support informed investment decisions.

### ğŸ¯ **What Makes This Special**

- **ğŸ¤– Natural Conversations** - Chat naturally without commands
- **ğŸ“¸ Advanced Photo Analysis** - Upload zip files for comprehensive property assessment
- **ğŸ—ï¸ Structural Assessment** - Professional-grade building analysis
- **ğŸ“Š Intelligent Comping** - 5-phase advanced comparable analysis
- **âš ï¸ Risk Detection** - Environmental hazards and code compliance
- **âš¡ Energy Efficiency** - Complete efficiency analysis and savings potential
- **ğŸ“ˆ Performance Tracking** - Deal analysis and margin optimization

## ğŸš€ Key Features

### ğŸ’¬ **Natural Conversation Interface**
- **No Commands Required** - Chat naturally about properties
- **Context Awareness** - Remembers conversation context
- **Follow-up Questions** - Ask for more details without repeating
- **Persistent Conversations** - Maintains context across messages

### ğŸ“¸ **Advanced Photo Analysis**
- **Batch Upload** - Upload zip files with all property photos
- **AI-Powered Analysis** - Room-by-room condition assessment
- **Damage Detection** - Automatic identification of issues
- **Repair Estimation** - Accurate cost projections
- **Professional Reports** - Comprehensive analysis summaries

### ğŸ—ï¸ **Structural Assessment**
- **Foundation Analysis** - Condition, cracks, settling, water infiltration
- **Roof Assessment** - Age, material, damage, ventilation issues
- **Electrical Systems** - Panel type, wiring, code compliance
- **Plumbing Systems** - Pipe materials, leaks, pressure issues
- **HVAC Systems** - Age, efficiency, ductwork assessment
- **Wall Integrity** - Structural condition and materials

### ğŸ“‹ **Building Code Compliance**
- **Safety Violations** - Critical, major, and minor violations
- **Compliance Scoring** - 0-100% compliance rating
- **Required Upgrades** - Immediate, 1-year, and 5-year timelines
- **Cost Estimation** - Compliance upgrade costs

### âš ï¸ **Environmental Hazard Detection**
- **Mold Assessment** - Detection, severity, remediation costs
- **Water Damage** - Extent, locations, repair estimates
- **Asbestos Risk** - Risk levels, suspected materials, testing costs
- **Lead Paint Risk** - Risk assessment, testing recommendations

### âš¡ **Energy Efficiency Analysis**
- **Overall Efficiency Score** - 0-100% rating
- **Insulation Quality** - Type, condition, upgrade costs
- **Window Efficiency** - Type, performance, replacement costs
- **HVAC Efficiency** - Rating, upgrade recommendations
- **Annual Energy Savings** - Potential cost savings

### ğŸ“Š **Advanced Comping System**
- **Phase 1: Enhanced Condition Weighting** - Prioritizes condition similarity
- **Phase 2: Advanced Comp Validation** - Transaction type and payment method analysis
- **Phase 3: Location Intelligence** - Micro-market and neighborhood analysis
- **Phase 4: Performance Analytics** - Margin tracking and deal analysis
- **Phase 5: AI-Powered Analysis** - Photo analysis and predictive modeling

## ğŸ’¬ How to Interact

### ğŸ—£ï¸ **Natural Language Conversations**

**Start a conversation naturally:**
```
User: "I'm looking at a property at 123 Main St, Anytown, USA"
Agent: "Great! I can help analyze that property. Let me get started..."

User: "What do you think about the condition?"
Agent: "Based on the photos, I can see several areas of concern..."

User: "How much would repairs cost?"
Agent: "Let me break down the repair costs by category..."
```

**Ask follow-up questions:**
```
User: "What about the foundation?"
Agent: "The foundation shows signs of settling with visible cracks..."

User: "Is it a good investment?"
Agent: "Based on my analysis, here's my assessment..."
```

### ğŸ“¸ **Photo Analysis Workflow**

**1. Start Photo Analysis:**
```
User: /photos 123 Main St, Anytown, USA
Agent: ğŸ“¸ Photo Analysis Setup
Property: 123 Main St, Anytown, USA

Please upload a zip file containing all property photos in this thread. 
I'll analyze them for:
â€¢ Room-by-room condition assessment
â€¢ Damage detection and repair estimates
â€¢ Overall property insights
â€¢ Construction quality analysis
```

**2. Upload Zip File:**
- Create a zip file with all property photos
- Upload to the Slack thread
- Agent automatically processes and analyzes

**3. Get Comprehensive Report:**
```
ğŸ“¸ PHOTO ANALYSIS COMPLETE

ğŸ“Š Processing Summary:
â€¢ Total Photos: 15
â€¢ Successfully Processed: 15
â€¢ Processing Time: 3.2s

ğŸ  Overall Property Assessment:
â€¢ Condition: FAIR
â€¢ Average Condition Score: 65.2%
â€¢ Total Repair Cost: $28,450
â€¢ Construction Quality: MEDIUM
â€¢ Maintenance Level: FAIR
â€¢ Renovation Potential: HIGH

ğŸ—ï¸ ADVANCED STRUCTURAL ASSESSMENT
â€¢ Overall Risk Score: 12.5%
â€¢ Total Estimated Costs: $45,200

ğŸ  Structural Systems:
â€¢ Foundation: GOOD ($2,500)
â€¢ Roof: FAIR ($8,200)
â€¢ Electrical: POOR ($12,800)
â€¢ Plumbing: GOOD ($3,200)
â€¢ HVAC: FAIR ($6,500)

ğŸ“‹ Building Code Compliance:
â€¢ Compliance Score: 78.5%
â€¢ Critical Violations: 0
â€¢ Major Violations: 1
â€¢ Compliance Cost: $5,000

âš ï¸ Environmental Hazards:
â€¢ Mold: MINOR ($2,500)
â€¢ Water Damage: NONE ($0)
â€¢ Asbestos Risk: MEDIUM (testing recommended)
â€¢ Lead Paint Risk: HIGH (testing recommended)

âš¡ Energy Efficiency:
â€¢ Overall Score: 72.0%
â€¢ Annual Energy Savings: $1,200
â€¢ Insulation: FAIR
â€¢ Windows: POOR
â€¢ HVAC: FAIR

ğŸš¨ Critical Issues:
1. Electrical system requires attention
2. Lead paint testing recommended

ğŸ’¡ Recommended Actions:
1. Schedule electrical inspection
2. Conduct lead paint testing
3. Consider window replacement
```

### ğŸ“Š **Traditional Comping Analysis**

**Use the `/acq` command for detailed comping:**
```
User: /acq 123 Main St, Anytown, USA
Agent: ğŸ” Analyzing 123 Main St, Anytown, USA...

ğŸ“Š COMPARABLE SALES ANALYSIS
â€¢ Found 8 comparable properties
â€¢ Average sale price: $285,000
â€¢ Price range: $265,000 - $310,000

ğŸ’° ARV ESTIMATION
â€¢ After Repair Value: $295,000
â€¢ Range: $285,000 - $305,000
â€¢ Method: Weighted median with condition adjustments

ğŸ”§ REPAIR ESTIMATION
â€¢ Total Repair Cost: $28,450
â€¢ Method: Photo-based analysis
â€¢ Breakdown: Structural ($12,800), Cosmetic ($15,650)

ğŸ“ˆ DEAL ANALYSIS
â€¢ MAO (Max Allowable Offer): $185,550
â€¢ Potential Profit: $81,000
â€¢ Margin: 27.5%
â€¢ Recommended Buyer Type: Fix & Flip
â€¢ Estimated DOM: 45 days

ğŸ¯ RECOMMENDATIONS
â€¢ Strong investment potential
â€¢ Focus on electrical upgrades
â€¢ Consider energy efficiency improvements
â€¢ Lead paint testing recommended
```

## ğŸ“¸ Photo Analysis

### ğŸ¯ **What the AI Analyzes**

**Room-by-Room Assessment:**
- Kitchen condition and appliances
- Bathroom fixtures and plumbing
- Bedroom walls and flooring
- Living areas and common spaces
- Exterior siding and roof
- Basement and foundation
- Attic and insulation
- Garage and storage areas

**Damage Detection:**
- Water damage and mold
- Structural cracks and settling
- Electrical issues and safety hazards
- Plumbing leaks and pressure problems
- HVAC system condition
- Roof damage and ventilation issues

**Professional Insights:**
- Construction quality assessment
- Maintenance level evaluation
- Renovation potential analysis
- Energy efficiency scoring
- Environmental hazard identification
- Code compliance verification

### ğŸ“ **Photo Upload Requirements**

**Supported Formats:**
- JPEG (.jpg, .jpeg)
- PNG (.png)
- GIF (.gif)
- BMP (.bmp)
- WebP (.webp)

**File Organization:**
- Create a zip file containing all photos
- Photos can be in subfolders
- AI automatically categorizes by room type
- Minimum 5 photos recommended for advanced analysis

## ğŸ—ï¸ Advanced Analysis

### ğŸ  **Structural Assessment**

**Foundation Analysis:**
- Condition evaluation (excellent to critical)
- Crack detection and severity
- Settling and structural movement
- Water infiltration assessment
- Repair cost estimation

**Roof Assessment:**
- Age estimation and material identification
- Damage detection (missing shingles, leaks)
- Ventilation system evaluation
- Flashing and gutter condition
- Replacement cost projections

**Systems Analysis:**
- Electrical panel type and capacity
- Plumbing pipe materials and condition
- HVAC system age and efficiency
- Safety code compliance
- Upgrade recommendations

### ğŸ“‹ **Building Code Compliance**

**Safety Violations:**
- Critical violations requiring immediate attention
- Major violations needing 1-year resolution
- Minor violations for 5-year planning
- Compliance scoring (0-100%)
- Required upgrade timelines

**Code Requirements:**
- Electrical code compliance
- Plumbing code standards
- Structural safety requirements
- Environmental regulations
- Accessibility standards

### âš ï¸ **Environmental Hazards**

**Mold Detection:**
- Visual identification from photos
- Severity assessment (none to severe)
- Location mapping
- Remediation cost estimation
- Prevention recommendations

**Hazardous Materials:**
- Asbestos risk assessment
- Lead paint identification
- Testing recommendations
- Risk level classification
- Professional testing costs

### âš¡ **Energy Efficiency**

**Comprehensive Scoring:**
- Overall efficiency rating (0-100%)
- Insulation quality assessment
- Window efficiency analysis
- HVAC system rating
- Annual energy savings potential

**Upgrade Recommendations:**
- Cost-effective improvements
- Energy savings calculations
- ROI projections
- Priority-based recommendations

## ğŸ“Š Comping System

### ğŸ” **5-Phase Advanced Analysis**

**Phase 1: Enhanced Condition Weighting**
- Prioritizes condition similarity in comp selection
- Weighted median ARV calculation
- Margin-optimizing adjustments
- Conservative estimates for wholesaling

**Phase 2: Advanced Comp Validation**
- Transaction type verification
- Payment method analysis
- Seller concession identification
- Condition change tracking

**Phase 3: Location Intelligence**
- Micro-market analysis
- School district impact
- Neighborhood boundaries
- Market trend analysis

**Phase 4: Performance Analytics**
- Margin tracking
- Deal velocity analysis
- Comp quality metrics
- Market intelligence

**Phase 5: AI-Powered Analysis**
- Photo-based condition assessment
- Predictive market modeling
- Risk assessment
- Portfolio optimization

## ğŸ—ï¸ Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Slack Bot     â”‚    â”‚  OpenAI API     â”‚    â”‚  MongoDB        â”‚
â”‚   (@bolt)       â”‚â—„â”€â”€â–ºâ”‚   (GPT-4)       â”‚â—„â”€â”€â–ºâ”‚   Database      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â–¼                       â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Conversation   â”‚    â”‚  Photo Analysis â”‚    â”‚  Advanced       â”‚
â”‚  Manager        â”‚    â”‚  Engine         â”‚    â”‚  Analytics      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â–¼                       â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Natural        â”‚    â”‚  Structural     â”‚    â”‚  Performance    â”‚
â”‚  Language       â”‚    â”‚  Assessment     â”‚    â”‚  Tracking       â”‚
â”‚  Processing     â”‚    â”‚  Engine         â”‚    â”‚  System         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Technology Stack
- **Runtime**: Node.js 18+ with TypeScript
- **Framework**: Slack Bolt framework for bot integration
- **AI**: OpenAI GPT-4 for natural language processing
- **Computer Vision**: AI-powered photo analysis
- **Database**: MongoDB with Mongoose ODM
- **File Processing**: Zip extraction and image analysis
- **Validation**: Zod for schema validation
- **Development**: Nodemon, ts-node for hot reloading

## âš¡ Quick Start

### Prerequisites
- Node.js 18+ and npm
- MongoDB (local) or MongoDB Atlas (production)
- OpenAI API key
- Slack app credentials

### 1. Clone & Install
```bash
git clone https://github.com/sirschrockalot/ai-acquisition-agent.git
cd ai-acquisition-agent
npm install
```

### 2. Environment Setup
```bash
cp .env.example .env
# Edit .env with your credentials
```

### 3. Database Setup
```bash
# For local MongoDB
npm run db:start

# Or connect to MongoDB Atlas (production)
# Update MONGODB_URI in .env file
```

### 4. Start the Bot
```bash
npm run dev
```

## ğŸ“¦ Installation

### Step-by-Step Setup

1. **Install Dependencies**
   ```bash
   npm install
   ```

2. **Database Setup**
   - Use local MongoDB for development (see [Database Setup Guide](DATABASE_SETUP.md))
   - Use MongoDB Atlas for production
   - Update `MONGODB_URI` in your `.env` file

3. **Slack App Configuration**
   - Create a new Slack app at [api.slack.com](https://api.slack.com/apps)
   - Add bot token scopes: `chat:write`, `commands`, `app_mentions:read`, `files:read`
   - Install app to your workspace

4. **OpenAI Configuration**
   - Get API key from [OpenAI Platform](https://platform.openai.com/)
   - Add to `.env` file

## âš™ï¸ Configuration

### Environment Variables

Create a `.env` file in the project root:

```bash
# Database
MONGODB_URI="mongodb://localhost:27017/acquisitions_agent"
# For MongoDB Atlas: MONGODB_URI="mongodb+srv://username:password@cluster.mongodb.net/acquisitions_agent"

# OpenAI
OPENAI_API_KEY="your-openai-api-key"

# Slack
SLACK_BOT_TOKEN="xoxb-your-bot-token"
SLACK_SIGNING_SECRET="your-signing-secret"
SLACK_APP_TOKEN="xapp-your-app-token"

# Optional: Custom settings
ASSIGNMENT_FEE_MIN=10000
DEFAULT_DISPO_WINDOW=45
```

### Comping Rules

The system uses configurable rules for comparable sales selection. See [comping_rules.json](comping_rules.json) for current settings:

- **Distance Limits**: Maximum miles from subject property
- **Recency Limits**: Maximum days since sale
- **Adjustment Limits**: Maximum percentage adjustments allowed
- **Property Type Matching**: Ensures comparable property types

## ğŸ”§ Development

### Scripts

```bash
npm run dev      # Start development server with hot reload
npm run build    # Build TypeScript to JavaScript
npm start        # Start production server
npm test         # Run tests
```

### Project Structure

```
ai-acquisition-agent/
â”œâ”€â”€ src/                           # TypeScript source code
â”‚   â”œâ”€â”€ index.ts                  # Main application entry point
â”‚   â”œâ”€â”€ conversation-manager.ts   # Natural conversation handling
â”‚   â”œâ”€â”€ photo-upload-handler.ts   # Photo analysis engine
â”‚   â”œâ”€â”€ advanced-photo-analysis.ts # Structural assessment
â”‚   â”œâ”€â”€ comping-utils.ts          # Advanced comping algorithms
â”‚   â”œâ”€â”€ mongo-service.ts          # MongoDB service layer
â”‚   â””â”€â”€ model-config.ts           # AI model configuration
â”œâ”€â”€ data/                         # Data storage
â”œâ”€â”€ uploads/                      # Photo upload storage
â”œâ”€â”€ temp/                         # Temporary file processing
â”œâ”€â”€ docs/                         # Documentation
â””â”€â”€ package.json                  # Dependencies and scripts
```

### Development Workflow

1. **Make Changes**: Edit TypeScript files in `src/`
2. **Auto-Reload**: Nodemon automatically restarts on file changes
3. **Database Changes**: Update MongoDB schemas and restart the service
4. **Testing**: Use natural conversations and photo uploads to test features

## ğŸ“š Documentation

### Core Documentation
- [Agent Instructions](agent_instructions.md) - Detailed system prompts and rules
- [Database Setup](DATABASE_SETUP.md) - Database configuration guide
- [Learning System](LEARNING_SYSTEM.md) - Bot learning and improvement features
- [Comping Improvements](COMPING_IMPROVEMENTS.md) - Advanced comping system details

### Feature Guides
- **Natural Conversations**: Chat naturally without commands
- **Photo Analysis**: Upload zip files for comprehensive assessment
- **Structural Assessment**: Professional-grade building analysis
- **Environmental Hazards**: Mold, asbestos, lead paint detection
- **Energy Efficiency**: Complete efficiency analysis
- **Advanced Comping**: 5-phase intelligent comp selection

## ğŸ¤ Contributing

We welcome contributions! Please follow these steps:

1. **Fork** the repository
2. **Create** a feature branch (`git checkout -b feature/amazing-feature`)
3. **Commit** your changes (`git commit -m 'Add amazing feature'`)
4. **Push** to the branch (`git push origin feature/amazing-feature`)
5. **Open** a Pull Request

### Development Guidelines

- Follow TypeScript best practices
- Add tests for new features
- Update documentation for API changes
- Follow the existing code style
- Test thoroughly in development environment

## ğŸ“„ License

This project is licensed under the ISC License - see the [LICENSE](LICENSE) file for details.

## ğŸ†˜ Support

### Documentation
- [Agent Instructions](agent_instructions.md) - Detailed system prompts and rules
- [Database Setup](DATABASE_SETUP.md) - Database configuration guide
- [Learning System](LEARNING_SYSTEM.md) - Bot learning and improvement features
- [Comping Improvements](COMPING_IMPROVEMENTS.md) - Advanced comping system

### Issues & Questions
- Create an [issue](https://github.com/sirschrockalot/ai-acquisition-agent/issues) for bugs or feature requests
- Check existing issues for solutions
- Review documentation for common setup questions

---

**Built with â¤ï¸ for Presidential Digs Real Estate, LLC**

*Professional-grade AI-powered property analysis and acquisition platform.*

---

## ğŸ¯ **Ready to Transform Your Property Analysis?**

Your AI agent is now a **comprehensive property analysis platform** that can:

âœ… **Chat naturally** about properties without commands  
âœ… **Analyze photos** with professional-grade assessment  
âœ… **Assess structural integrity** like a building inspector  
âœ… **Detect environmental hazards** and compliance issues  
âœ… **Calculate energy efficiency** and potential savings  
âœ… **Provide intelligent comping** with 5-phase analysis  
âœ… **Track performance** and optimize margins  

**Start analyzing properties like a professional today!** ğŸš€
